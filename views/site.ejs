<html>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<body>
<form action='/site/add/' method="post" id="formData">
    location name:<input type="text" name="location_name"><br>
    latitude:<input type="text" name="latitude"><br>
    longitude:<input type="text" name="longitude"><br>
    start date:<input type="date" name="start_date"><br>
    end date:<input type="date" name="end_date"><br>
    <select id="pno" name="pno">
        <option value="" disabled selected>Choose project</option>
    </select><br>

    <select id="cno" name="cno">
        <option value="" disabled selected>Choose context</option>
    </select><br>

    <button type="submit" id="submitButton"
            name="submitButton" value="Submit">Add
    </button>

</form>
</body>
</html>


<script type="text/javascript">

    $.get('/projects/projectDetails/', function (data) {
        for (var j = 0; j < data.projectdetails.length; j++) {
            $('#pno').append('<option value="' + data.projectdetails[j].pno + '">' + data.projectdetails[j].pro_name + '</option>');
        }
    });

    $.get('/context/', function (data) {
        for (var j = 0; j < data.detailsOfContext.length; j++) {
            $('#cno').append('<option value="' + data.detailsOfContext[j].context_id + '">' + data.detailsOfContext[j].description + '</option>');
        }
    });

    $('formData').submit(function(event) {

        // get the form data
        // there are many ways to get this data using jQuery (you can use the class or id also)
        var e = document.getElementById("pno");
        var strUser = e.options[e.selectedIndex].value;

        var c = document.getElementById("pno");
        var strUser1 = c.options[c.selectedIndex].value;
        var formData = {
            'locationname'              : $('input[name=location_name]').val(),
            'latitude'             : $('input[name=latitude]').val(),
            'longitude'    : $('input[name=longitude]').val(),
            'startdate' : $('input[name=start_date]').val(),
            'enddate' : $('input[name=end_date]').val(),

            'pno':     strUser,
            'cno': strUser1
        };

        $.ajax({
            type        : 'POST',
            url         : '/site/add',
            data        : formData,
            dataType    : 'json',
            encode          : true
        })
                .done(function(data) {

                    console.log(data);

                });

        event.preventDefault();
    });

</script>

